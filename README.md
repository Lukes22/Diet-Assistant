# 饮食助手 - AI 卡路里计算器

## 产品简介

饮食助手是一款基于人工智能的卡路里计算网页应用。用户只需用自然语言描述一餐的饮食内容，AI 即可自动识别食物、计算热量，并以形象化的方式展示结果，同时根据《中国居民膳食指南》给出专业的饮食建议。

本产品采用对话式交互设计，界面简洁友好，让健康管理变得轻松有趣。

## 功能介绍

### 核心功能

1. **智能饮食分析**
   - 支持自然语言输入，如"两个包子，一杯豆浆，一个煎蛋"
   - AI 自动识别食物种类和数量
   - 精准计算每种食物及总卡路里

2. **餐次分类**
   - 支持早餐、午餐、晚餐、零食四种餐次
   - 针对不同餐次给出差异化的营养建议

3. **智能澄清机制**
   - 对模糊描述自动识别（如"米饭"未说明大小）
   - 弹出选择卡片让用户确认分量
   - 支持小碗/中碗/大碗、小杯/中杯/大杯等选项

4. **形象化卡路里展示**
   - 将卡路里换算为日常参照物
   - 显示相当于 X 瓶可乐
   - 显示相当于 X 碗米饭
   - 显示需要跑步 X 公里消耗

5. **健康评分与建议**
   - 基于《中国居民膳食指南》评估饮食
   - 0-100 分健康评分
   - 提供针对性的营养改善建议

## 产品亮点

### 1. 对话式交互体验
采用聊天界面设计，用户与 AI 助手自然对话，无需填写复杂表单，降低使用门槛。

### 2. 智能模糊处理
当用户描述不够精确时，系统不会简单报错，而是智能识别模糊点并引导用户选择，提升用户体验。

### 3. 形象化数据呈现
将抽象的卡路里数字转化为可乐、米饭、跑步距离等直观参照，让用户对热量摄入有具象认知。

### 4. 专业营养指导
结合《中国居民膳食指南》，提供符合国人饮食习惯的专业建议，而非简单的热量计算。

### 5. 响应迅速
采用流式 API 调用，响应速度快，用户体验流畅。

## 技术方案特色

### 架构设计

```
┌─────────────────────────────────────────────┐
│                  前端层                      │
│    HTML + CSS + JavaScript (原生实现)        │
├─────────────────────────────────────────────┤
│                  后端层                      │
│           Flask Web 框架                     │
├─────────────────────────────────────────────┤
│                  AI 层                       │
│   ModelScope API (Qwen2.5-32B-Instruct)     │
└─────────────────────────────────────────────┘
```

### 技术栈

| 层级 | 技术选型 | 说明 |
|------|----------|------|
| 后端框架 | Flask | 轻量级 Python Web 框架 |
| AI 服务 | ModelScope API | 魔搭大模型推理服务 |
| AI 模型 | Qwen2.5-32B-Instruct | 通义千问指令微调模型 |
| 前端 | 原生 HTML/CSS/JS | 无框架依赖，轻量快速 |
| 部署 | Docker | 容器化部署，环境一致 |

### 技术特色

1. **OpenAI 兼容接口**
   - 使用 OpenAI SDK 调用魔搭 API
   - 便于后续切换不同模型服务

2. **流式响应处理**
   - 采用 streaming 模式调用大模型
   - 降低首字延迟，提升响应体验

3. **结构化输出**
   - 通过精心设计的 Prompt 引导 AI 输出 JSON
   - 多重解析策略确保数据提取成功

4. **安全配置**
   - API Key 通过环境变量管理
   - 支持 .env 文件本地配置

5. **容器化部署**
   - 提供 Dockerfile 支持一键部署
   - 可直接部署到魔搭创空间

### 项目结构

```
Diet-Assistant/
├── app.py              # Flask 主应用
├── requirements.txt    # Python 依赖
├── Dockerfile          # 容器配置
├── .env                # 环境变量（API Key）
├── static/
│   ├── css/
│   │   └── style.css   # 样式文件
│   └── js/
│       └── app.js      # 前端逻辑
├── templates/
│   └── index.html      # 主页面
└── doc/
    └── README.md       # 项目说明
```

## 使用说明

1. 配置环境变量 `MODELSCOPE_API_KEY`
2. 安装依赖：`pip install -r requirements.txt`
3. 启动服务：`python app.py`
4. 访问 `http://localhost:7860`

## 演示地址

魔搭创空间：https://modelscope.cn/studios/Lukes22/DIet_Assistant
